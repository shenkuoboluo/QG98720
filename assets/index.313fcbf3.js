import{b as F}from"./index.ba45eeb0.js";var W={exports:{}};(function(w){(function(O){var C=function(r){this.el=document.querySelector(r.el),this.Timetables=r.timetables||[],this.week=r.week||[],this.merge=typeof r.merge=="boolean"?r.merge:!0,this.TimetableType=r.timetableType||[],this.leftHandText=[],this.highlightWeek=r.highlightWeek||"",this.gridOnClick=typeof r.gridOnClick=="function"?r.gridOnClick:void 0;var a=r.styles||{};this.leftHandWidth=a.leftHandWidth||40,this.Gheight=a.Gheight||48,this.defaultPalette=["#f05261","#48a8e4","#ffd061","#52db9a","#70d3e6","#52db9a","#3f51b5","#f3d147","#4adbc3","#673ab7","#f3db49","#76bfcd","#b495e1","#ff9800","#8bc34a"],this.palette=typeof a.palette=="boolean"&&!a.palett?!1:(a.palette||[]).concat(this.defaultPalette),this._init()};C.prototype={_init:function(a){var a=a||{},u=a.styles||{},H=a.gridOnClick||this.gridOnClick,b=typeof a.merge=="boolean"?a.merge:this.merge,G=a.highlightWeek||this.highlightWeek,_=this.leftHandText,N=u.leftHandWidth||this.leftHandWidth,x=u.Gheight||this.Gheight,c;typeof u.palette=="boolean"&&!u.palette?c=!1:c=u.palette?(u.palette||[]).concat(this.defaultPalette):this.palette;var v=a.timetables||this.Timetables,y=a.week||this.week,g=JSON.parse(JSON.stringify(a.timetableType||this.TimetableType)),q=a.timetableType||this.TimetableType,S=g.length;v.forEach(function(l,t){if(l.length<S)for(var e=0;e<S-l.length;e++)l.push("")}),a.setNewOption&&this.el.removeChild(this.el.childNodes[0]);var d=document.createElement("div");d.id="courseWrapper",d.style.position="relative",d.style.paddingLeft=N+"px",d.style.border="1px solid #dbdbdb",g.forEach(function(l,t){l.unshift(t+1)});var f=document.createElement("div");f.className="Courses-leftHand",f.style.position="absolute",f.style.left=0,f.style.top=0,f.style.width=N+"px";var E=v[0].map(function(l,t){return[]});E.forEach(function(l,t){v.forEach(function(e,i){E[t].push(e[t])})});var n=[];b&&v.forEach(function(l,t){n[t]||(n[t]=[]),l.forEach(function(e,i){if(!i)return n[t].push({name:e,length:1});if(e===(n[t][i-1]||{}).name&&e){var s=(n[t][i-1]||{}).sameIndex;return s||s===0?(n[t][s].length++,n[t].push({name:e,length:0,sameIndex:s})):(n[t][i-1].length++,n[t].push({name:e,length:0,sameIndex:i-1}))}else return n[t].push({name:e,length:1})})});var T=document.createElement("div");T.style.overflow="hidden",T.className="Courses-head",y.forEach(function(l,t){var e=document.createElement("div"),i=G===t+1?"highlight-week ":"";e.className=i+"Courses-head-"+(t+1),e.innerText=l,e.style.cssFloat="left",e.style.boxSizing="border-box",e.style.whiteSpace="nowrap",e.style.width=100/y.length+"%",T.appendChild(e)}),d.appendChild(T);var k=document.createElement("div");k.className="Courses-content";var p=0;E.forEach(function(l,t){var e=document.createElement("ul");e.style.listStyle="none",e.style.padding="0px",e.style.margin="0px",e.style.minHeight=x+"px",e.className="stage_"+((g[0]||[])[0]||"none"),--(g[0]||[])[2],(g[0]||[])[2]||g.shift(),l.forEach(function(i,s){if(!(s>y.length-1)){var h=document.createElement("li");if(h.style.cssFloat="left",h.style.width=100/y.length+"%",h.style.height=x+"px",h.style.boxSizing="border-box",h.style.position="relative",b&&n[s][t].length>1){var o=document.createElement("span");o.style.position="absolute",o.style.zIndex=9,o.style.width="100%",o.style.height=x*n[s][t].length+"px",o.style.left=0,o.style.top=0,c&&(o.style.backgroundColor=c[p],o.style.color="#fff",p++,p>c.length&&(p=0)),o.innerText=n[s][t].name,o.className="course-hasContent",h.appendChild(o)}else b&&n[s][t].length===0?h.innerText="":(i&&c?(h.style.backgroundColor=c[p],h.style.color="#fff",p++,p>c.length&&(p=0)):i&&(h.className="course-hasContent"),h.innerText=i||"");h.onclick=function(I){document.querySelectorAll(".Courses-content ul li").forEach(function(j,J){j.classList.remove("grid-active")}),this.className="grid-active";var P={name:i,week:y[s],index:t+1,length:b?n[s][t].length:1};H&&H(P)},e.appendChild(h)}}),k.appendChild(e)}),d.appendChild(k),d.appendChild(f),this.el.appendChild(d);var z=(document.querySelector(".stage_1 li")||document.querySelector(".stage_none li")).offsetHeight,L=document.querySelector(".Courses-head").offsetHeight,m=document.createElement("div");m.className="left-hand-TextDom",m.style.height=L+"px",m.style.boxSizing="border-box",_.forEach(function(l){var t=document.createElement("div");t.innerText=l,m.appendChild(t)}),f.appendChild(m),q.forEach(function(l,t){var e=document.createElement("div");if(e.style.width="100%",e.style.height=z*l[1]+"px",e.style.boxSizing="border-box",typeof l[0]=="object")for(var i in l[0]){var s=document.createElement("p");s.innerText=l[0][i],s.style.margin="0px",s.className="left-hand-"+i,e.appendChild(s)}else e.innerText=l[0]||"";e.className="left-hand-"+(t+1),f.appendChild(e)})},setOption:function(r){(r||{}).setNewOption=!0,this._init(r)}},w.exports&&(w.exports=C),O.Timetables=C})(F)})(W);var M=W.exports;export{M as T};
